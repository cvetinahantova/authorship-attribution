/*
 authorship-attribution-node-api 2015-01-02 
*/
!function(){"use strict";google.setOnLoadCallback(function(){angular.bootstrap(document.body,["angular-app"])}),google.load("visualization","1.1",{packages:["corechart"]}),angular.module("angular-app",["ngRoute","ngAnimate","appRoutes","MainController","AuthorshipAttributionService","google-chart"])}(),angular.module("appRoutes",[]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/home.html",controller:"mainController"}),b.html5Mode(!0)}]),angular.module("MainController",[]).controller("MainController",["$scope","$http","AuthorshipAttribution",function(a,b,c){a.corpora=[{id:"federalist-data",label:"Federalist Data"},{id:"novels",label:"English novels"},{id:"education",label:"Education blogs"}],a.selectedCorpus=a.corpora[0],a.authorsSetSizes=[{id:"small",label:"Small"},{id:"medium",label:"Medium"},{id:"big",label:"Big"}],a.selectedAuthorsSetSize=a.authorsSetSizes[2],a.dataSetSizes=[{id:"limited",label:"Limited"},{id:"balanced",label:"Balanced"},{id:"unbalanced",label:"Unbalanced"}],a.selectedDataSetSize=a.dataSetSizes[2],a.nfzStatistics=[],a.nfzChartConfig={title:"Natural Frequency Zoned Word Distribution Analysis - "+a.selectedCorpus.label,legend:{position:"none"},hAxis:{title:"Partition Function"}},a.snGramsStatistics=[],a.snGramsChartConfig={title:"SN-Grams Analysis - "+a.selectedCorpus.label,hAxis:{title:"SN-Gram Length"}},a.isProgressBarVisible=!1,a.areOptionsDisabled=!0,a.getCorpusStatistics=function(){console.log(a.selectedCorpus.id+" "+a.selectedAuthorsSetSize.id+" "+a.selectedDataSetSize.id),a.isProgressBarVisible=!0,c.getCorpusAlgorithmsReports(a.selectedCorpus.id,a.selectedAuthorsSetSize.id+"_"+a.selectedDataSetSize.id).success(function(b){console.log(b[0]),console.log(b[1]),a.nfzChartConfig.title="Natural Frequency Zoned Word Distribution Analysis - "+a.selectedCorpus.label,a.nfzStatistics=b[1],a.snGramsChartConfig.title="SN-Grams Analysis - "+a.selectedCorpus.label,a.snGramsStatistics=b[0],a.isProgressBarVisible=!1}).error(function(b){console.log(b),a.isProgressBarVisible=!1})},a.selectCorpus=function(){"federalist-data"==a.selectedCorpus.id?(a.areOptionsDisabled=!0,a.selectedDataSetSize=a.dataSetSizes[2],a.selectedAuthorsSetSize=a.authorsSetSizes[2],a.getCorpusStatistics()):a.areOptionsDisabled=!1},a.getCorpusStatistics(),a.getSNgramsReport=function(){c.getSNgramsReport().success(function(b){var c=google.visualization.arrayToDataTable(b);a.statistics={},a.statistics.dataTable=c,a.statistics.title="Federalist Articles - sn-grams",a.statistics.subtitle="SN-grams statistics"})},a.getNFZReport=function(){c.getNFZReport().success(function(b){var c=google.visualization.arrayToDataTable(b);a.statistics={},a.statistics.dataTable=c,a.statistics.title="Federalist Articles - NFZ",a.statistics.subtitle="NFZ statistics"})}}]),function(){"use strict";var a=a||angular.module("google-chart",[]);a.directive("googleChart",function(){return{restrict:"A",scope:{chartData:"=",chartConfig:"="},link:function(a,b,c){function d(a,b,c){return b.getFormattedValue(c,a)}var e=new google.visualization[c.googleChart](b[0]);a.$watch("chartData",function(b){var c=a.chartConfig;if(b){for(var f=google.visualization.arrayToDataTable(b),g=new google.visualization.NumberFormat({pattern:"#.# %"}),h=1;h<f.getNumberOfColumns();h++)g.format(f,h);for(var i=new google.visualization.DataView(f),j=[0],k=1;k<b[0].length;k++)j.push(k),j.push({calc:d.bind(void 0,k),sourceColumn:k,type:"string",role:"annotation"});i.setColumns(j),c.colors=["#b2cedc","#7b7b7b","#b2cadc","#7b7b6b","#b2bedc","#7b7d7b"],c.min=0,c.max=1,c.vAxis={},c.vAxis.minValue=0,c.vAxis.maxValue=1,c.vAxis.title="Accuracy",e.draw(i,c)}},!0)}}})}(),angular.module("AuthorshipAttributionService",[]).factory("AuthorshipAttribution",["$http",function(a){return{getCorpusAlgorithmsReports:function(b,c){return a.get("/statistics/"+b+"/"+c)}}}]);